# Firebase on Windows

## Why flavor isn’t used on Windows

- **Android**: Dev/prod flavors pick different `google-services.json` files, so each build can use a different Firebase project/app.
- **Windows**: There is no `google-services.json`. The Windows build uses a **single** Firebase config that lives in **`lib/firebase_options.dart`** (the `windows` entry). No flavor is required.

So: **flavor is not required for the Windows app.** Firebase for Windows is configured only via `firebase_options.dart`.

---

## How the Windows app uses Firebase

1. **`lib/firebase_options.dart`**  
   Generated by the FlutterFire CLI. It contains a `windows` entry with `apiKey`, `appId`, `projectId`, etc. The Windows build uses this.

2. **`lib/main.dart`**  
   Firebase is initialized with:
   ```dart
   await Firebase.initializeApp(options: DefaultFirebaseOptions.currentPlatform);
   ```
   On Windows, `currentPlatform` returns `DefaultFirebaseOptions.windows`, so the correct config is used.

3. **Same Firebase project**  
   Your Windows options point at the same project (`secure-calling-2025`). Firestore, Functions, Storage, etc. work the same as on Android/iOS; only the app registration (Windows app in the Firebase project) is different.

---

## Setup / (re)configuring Firebase for Windows

You only need to do this if you add a new Firebase project, or add or change the Windows app.

1. **Firebase Console**  
   - Open [Firebase Console](https://console.firebase.google.com/) → your project (e.g. **secure-calling-2025**).  
   - Go to **Project settings** (gear) → **Your apps**.  
   - If there is no **Windows** app, click **Add app** → **</> Web** (Flutter Windows often uses the same web app config) or use a dedicated Windows app if you created one.  
   - Note: Your current `firebase_options.dart` already has a `windows` entry with a web-style `appId`; that’s normal.

2. **Regenerate `firebase_options.dart` (if you added/changed the app)**  
   In the project root:
   ```bash
   dart run flutterfire configure
   ```
   - Select the same Firebase project.  
   - Ensure **Windows** is enabled when prompted.  
   - The CLI will overwrite `lib/firebase_options.dart` with the new `windows` config.

3. **Keep using `DefaultFirebaseOptions.currentPlatform`**  
   In `main.dart`, keep:
   ```dart
   await Firebase.initializeApp(options: DefaultFirebaseOptions.currentPlatform);
   ```
   so that on Windows the app uses the `windows` entry from `firebase_options.dart`.

After this, the Windows build uses Firebase without any flavor; the single Windows config in `firebase_options.dart` is enough.
